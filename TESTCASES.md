# Тест-кейсы для микросервиса объявлений

## Содержание
1. [Создание объявления](#создание-объявления)
2. [Получение объявления по ID](#получение-объявления-по-id)
3. [Получение объявлений по sellerId](#получение-объявлений-по-sellerid)
4. [Проверка статистики](#проверка-статистики)
5. [Негативные сценарии](#негативные-сценарии)
6. [Параметризованные тесты](#параметризованные-тесты)

---
{{baseUrl}} = https://qa-internship.avito.com

## Создание объявления

### **TC-001: Успешное создание объявления**
- **Описание:** Проверка корректного создания объявления с валидными данными.
- **Шаги:**
  1
     POST {{baseUrl}}/api/1/item
     
  "sellerID":  323333,
  "name": "Good",
  "price": 334,
  "statistics":{
    "contacts":1,
    "likes":6,
    "viewCount":6
  }

    
- **Ожидаемый результат:**
  - Статус: `200 OK`.
  - В ответе есть поле  "status": "Сохранили объявление - {номер id}".

---

### **TC-002: Некорректная цена (отрицательное значение)**!
- **Описание:** Проверка обработки отрицательной цены.
- **Шаги:**
  1. Отправить POST-запрос:
    
     POST /advertisements
     {
       "sellerId": 123456,
       "name": "Продам велосипед",
       "price": -100
"statistics":{
    "contacts":1,
    "likes":6,
    "viewCount":6
  }
     }
    
- **Ожидаемый результат:**
  - Статус: `400 Bad Request`.
  - Тело ответа содержит: `"Price must be positive"`.

---

## Получение объявления по ID

### **TC-003: Успешное получение объявления**
- **Описание:** Проверка получения данных по существующему ID.
- **Предусловие:** Создать объявление (TC-001).
- **Шаги:**
  1. Выполнить GET-запрос:
     ```
     GET {{baseUrl}}/api/1/item/:id
     ```
- **Ожидаемый результат:**
  - Статус: `200 OK`.
  - Тело ответа совпадает с данными из TC-001 (кроме поля "CreatedAt")
и имеет вид.
  {
    "id": "<string>",
    "sellerId": "<integer>",
    "name": "<string>",
    "price": "<integer>",
    "statistics": {
      "likes": "<integer>",
      "viewCount": "<integer>",
      "contacts": "<integer>"
    },
    "createdAt": "<string>"
  }.

---

### **TC-004: Несуществующий ID**
- **Описание:** Попытка получить объявление с невалидным ID.
- **Шаги:**
  1. Выполнить GET-запрос:
     ```
     GET {{baseUrl}}/api/1/item/00000000-0000-0000-0000-000000000000
     ```
- **Ожидаемый результат:**
  - Статус: `404 Not Found`.
  - Тело ответа: {
    "result": {
        "message": "statistic 00000000-0000-0000-0000-000000000001 not found",
        "messages": null
    },
    "status": "404"
}

---

## Получение объявлений по sellerId

### **TC-005: Успешное получение списка**
- **Описание:** Проверка получения объявлений существующего продавца.
- **Предусловие:** Создать объявление с `sellerId=123456` (TC-001).
- **Шаги:**
  1. Выполнить GET-запрос:
     ```
     GET {{baseUrl}}/api/1/123456/item
     ```
- **Ожидаемый результат:**
  - Статус: `200 OK`.
  - В ответе непустой массив объявлений с `sellerId=123456`.

---

### **TC-006: Несуществующий sellerId**
- **Описание:** Попытка получить объявления несуществующего продавца.
- **Шаги:**
  1. Выполнить GET-запрос:
     ```
     GET  {{baseUrl}}/api/1/:несуществующий_id/item
     ```
- **Ожидаемый результат:**
  - Статус: `404 Not Found`.
  - Тело ответа: `"Seller not found"`.

---

## Проверка статистики

### **TC-007: Получение статистики**
- **Описание:** Проверка статистики существующего объявления.
- **Предусловие:** Создать объявление (TC-001).
- **Шаги:**
  1. Выполнить GET-запрос:
     ```
     GET {{baseUrl}}/api/1/statistic/:id
     ```
- **Ожидаемый результат:**
  - Статус: `200 OK`.
  - В ответе есть поля: `likes`, `viewCount`, `contacts`.

---

## Негативные сценарии

### **TC-008: Пустое обязательное поле**
- **Описание:** Попытка создать объявление без поля `name`.
- **Шаги:**
  1. Отправить POST-запрос:
     ```json
         POST {{baseUrl}}/api/1/item
  {
  "sellerID":  323333,
  "price": 334,
  "statistics":{
    "contacts":1,
    "likes":6,
    "viewCount":6
  }
}
     ```
- **Ожидаемый результат:**
  - Статус: `400 Bad Request`.
  - Тело ответа: `"name must not be empty"`.

---

### **TC-009: Некорректный HTTP-метод**
- **Описание:** Использование PUT вместо POST.
- **Шаги:**
  1. Отправить PUT-запрос:
     ```json
     PUT  {{baseUrl}}/api/1/item
     "sellerID":  323333,
  "name": "Good",
  "price": 334,
  "statistics":{
    "contacts":1,
    "likes":6,
    "viewCount":6
  }
  "sellerID":  323333,
  "name": "Good",
  "price": 334,
  "statistics":{
    "contacts":1,
    "likes":6,
    "viewCount":6
  }
     
- **Ожидаемый результат:**
  - Статус: `405 Method Not Allowed`.
  - Тело ответа: `"Method Not Allowed"`.

---

## Параметризованные тесты

### **TC-010: Параметризованная проверка sellerId**
- **Описание:** Проверка разных некорректных `sellerId`.
- **Тестовые данные:**
  | sellerId     | Ожидаемый статус | Ожидаемое сообщение         |
  |--------------|-------------------|------------------------------|
  | 0            | 400               | "sellerId must be positive"  |
  | -123         | 400               | "sellerId must be positive"  |
  | 999999999    | 404               | "Seller not found"           |

- **Шаги:**
  1. Для каждого `sellerId` выполнить GET-запрос:
     ```
     GET {{baseUrl}}/api/1/:несуществующий_id/item
     ```
- **Ожидаемый результат:** Совпадение статуса и сообщения с таблицей.

---

### **TC-011: Параметризованная проверка цены**
- **Описание:** Проверка разных некорректных цен.
- **Тестовые данные:**
  | price | Ожидаемый статус | Ожидаемое сообщение         |
  |-------|-------------------|------------------------------|
  | -100  | 400               | "Price must be positive"     |
  | "abc" | 400               | "Invalid price format"       |

- **Шаги:**
  1. Для каждого `price` отправить POST-запрос:
     ```json
     
    POST {{baseUrl}}/api/1/item
  {
  "sellerID":  323333,
  "name": "Good",
  "price": {price из таблицы},
  "statistics":{
    "contacts":1,
    "likes":6,
    "viewCount":6
  }
}
     ```
- **Ожидаемый результат:** Совпадение статуса и сообщения с таблицей.

---

**Примечания:**
Знаю,что не все проверки указаны здесь, не весь отведенный промежуток времени была возможность работать над заданием, прошу учесть это при проверке.
